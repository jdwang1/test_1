(function(){var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(c,g){var y={getUrlParam:function(){var a=[],c=this.getURLQueryString().replace(/^\?/,"");if(c){var g=c.split("&"),y=!0,h=!1,v=void 0;try{for(var b,L=g[Symbol.iterator]();!(y=(b=L.next()).done);y=!0){var S=b.value,k=S.split("=");a.push({key:k[0],val:k[1]})}}catch(T){h=!0,v=T}finally{try{!y&&L.return&&L.return()}finally{if(h)throw v}}}return a},cookie:function(e,r,n){if("undefined"==typeof r){var o=null;if(g.cookie&&""!=g.cookie)for(var i=g.cookie.split(";"),a=0;a<i.length;a++){var c=i[a].replace(/(^\s*)|(\s*$)/g,"");if(c.substring(0,e.length+1)==e+"="){o=decodeURIComponent(c.substring(e.length+1));break}}return o}n=n||{},null===r&&(r="",n=$.extend({},n),n.expires=-1);var f="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var l;"number"==typeof n.expires?(l=new Date,l.setTime(l.getTime()+24*n.expires*60*60*1e3)):l=n.expires,f="; expires="+l.toUTCString()}var u=n.path?"; path="+n.path:"",s=n.domain?"; domain="+n.domain:"",p=n.secure?"; secure":"";g.cookie=[e,"=",encodeURIComponent(r),f,u,s,p].join("")},getNiceTuiSource:function(){return-1!==this.getURLQueryString().indexOf("click_source")||"nicetui"===v.click_source},getURLQueryString:function(){return location.search?location.search:location.hash.split("?").length>=2?location.hash.split("?")[1]:""},setCookie:function(){var a=this.getUrlParam();v={referrer:g.referrer,originUrl:location.href};var c="_nt_";if(a.length>0)for(var n=0;n<a.length;n++)v[a[n].key]=a[n].val,this.cookie(c+a[n].key,a[n].val,{path:"/",expires:1});for(var o=g.cookie.split(";"),n=0;n<o.length;n++)if(-1!==o[n].indexOf(c)){var i=o[n].split("=")[0];v[i.substr(i.indexOf(c)+c.length)]=o[n].split("=")[1]}this.sendLandLog(this.extendObj(v,{type:100}))},jsonpAjax:function(n){if(n=n||{},!n.url||!n.callback)throw new Error("参数不合法");var o=("jsonp_"+Math.random()).replace(".",""),i=t.getElementsByTagName("head")[0];n.data[n.callback]=o;var a=this.formatParams(n.data),r=t.createElement("script");i.appendChild(r),c[o]=function(t){i.removeChild(r),clearTimeout(r.timer),c[o]=null,n.success&&n.success(t)},r.src=n.url+"?"+a,n.time&&(r.timer=setTimeout(function(){c[o]=null,i.removeChild(r),n.error&&n.error({message:"超时"})},n.time))},formatParams:function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},ajax:function(){var a={type:arguments[0].type||"GET",url:arguments[0].url||"",async:arguments[0].async||"true",data:arguments[0].data||null,dataType:arguments[0].dataType||"text",contentType:arguments[0].contentType||"application/x-www-form-urlencoded",beforeSend:arguments[0].beforeSend||function(){},success:arguments[0].success||function(){},error:arguments[0].error||function(){}};a.beforeSend();var c=this.createxmlHttpRequest();c.responseType=a.dataType,c.open(a.type,"GET"==a.type?a.url+"?"+this.convertData(a.data):a.url,a.async),c.setRequestHeader("Content-Type",a.contentType),c.send(this.convertData(a.data)||""),c.onreadystatechange=function(){4==c.readyState&&(200==c.status?a.success(c.response):a.error())}},createxmlHttpRequest:function(){return c.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):c.XMLHttpRequest?new XMLHttpRequest:void 0},convertData:function(c){if("object"===("undefined"==typeof c?"undefined":a(c))){var g="";for(var y in c)g+=encodeURIComponent(y)+"="+encodeURIComponent(c[y])+"&";return g=g.substring(0,g.length-1)}return c},cloneObj:function(e){var t=this;if("object"!=("undefined"==typeof e?"undefined":"undefined"==typeof e?"undefined":a(e)))return e;if(null==e)return e;var r=new Object;for(var o in e)r[o]=t.cloneObj(e[o]);return r},extendObj:function(){var e=arguments;if(!(e.length<2)){for(var t=this.cloneObj(e[0]),r=1;r<e.length;r++)for(var n in e[r])t[n]=e[r][n];return t}}},h=null,v=null,b=0,r=0,s=0,l=0,L=parseInt(9999*Math.random())+parseInt((new Date).getTime()).toString().substr(5,8),S={init:function(){this.setCookie(),g.getElementById("send_log")&&(S.countInit(),this.visibilityListen()),S.domReady(function(){S.setCountLog()})},domReady:function(a){g.addEventListener?g.addEventListener("DOMContentLoaded",function(){g.removeEventListener("DOMContentLoaded",arguments.callee,!1),a()},!1):g.attachEvent&&g.attachEvent("onreadystatechange",function(){"complete"==g.readyState&&(g.detachEvent("onreadystatechange",arguments.callee),a())})},setCountLog:function(){if(g.querySelectorAll("[data-setting-click]"))for(var n=0;n<g.querySelectorAll("[data-setting-click]").length;n++)g.querySelectorAll("[data-setting-click]")[n].addEventListener("click",function(t){var a=this;"A"==a.tagName&&a.getAttribute("href")&&-1==a.getAttribute("href").indexOf("javascript:")?(t.preventDefault(),nicetuiLog.sendLog(function(){c.location.href=a.getAttribute("href")},{location:a.getAttribute("data-setting-click")})):nicetuiLog.sendLog(function(){},{location:a.getAttribute("data-setting-click")})});if(g.querySelectorAll("[data-setting-press]"))for(var n=0;n<g.querySelectorAll("[data-setting-press]").length;n++){var o=0,i=0;g.querySelectorAll("[data-setting-press]")[n].addEventListener("touchstart",function(){o=new Date}),g.querySelectorAll("[data-setting-press]")[n].addEventListener("touchend",function(){self=this,i=new Date-o,i>800&&void nicetuiLog.sendLog(function(){},{location:self.getAttribute("data-setting-press")})})}if(g.querySelectorAll("[data-setting-copy]"))for(var n=0;n<g.querySelectorAll("[data-setting-copy]").length;n++)g.querySelectorAll("[data-setting-copy]")[n].addEventListener("click",function(){self=this;var t=self.getAttribute("data-setting-copy"),n=t.match(/\$\{(.+?)\}/g);if(n&&n.length)for(var o in n){var i=n[o].replace("${","");i=i.replace("}",""),t=t.replace(n[o],d.getparams(i))}S.copyBoard("A"==self.tagName&&self.getAttribute("href")&&-1==self.getAttribute("href").indexOf("javascript:")?t:t)})},copyBoard:function(e){var n=g.createElement("textarea");n.style.position="fixed",n.style.top=0,n.style.left=0,n.style.width="2em",n.style.height="2em",n.style.padding=0,n.style.border="none",n.style.outline="none",n.style.boxShadow="none",n.style.background="transparent",n.value=e,g.body.appendChild(n);var o=n.hasAttribute("readonly");o||n.setAttribute("readonly",""),n.select(),n.setSelectionRange(0,n.value.length),o||n.removeAttribute("readonly"),selectedText=n.value;try{g.execCommand("copy")?void 0:void 0}catch(i){}g.body.removeChild(n)},countInit:function(){var o=startY=endX=endY=0;h=setInterval(S.countTime,1e3),g.addEventListener("touchstart",function(t){b++,S.dataAnalysis("touch");var n=t.targetTouches[0];o=n.pageX,startY=n.pageY;var i=i||c.event,r=i.target||i.srcElement;"input"==r.nodeName.toLowerCase()&&(S.dataAnalysis("input"),s++)}),g.addEventListener("touchend",function(e){endX=e.changedTouches[0].pageX,endY=e.changedTouches[0].pageY;var t=Math.abs(endY-startY),n=Math.abs(endX-o);0!==endX&&0!==endY&&(n>5||t>5)&&(S.dataAnalysis("move"),r++,endX=0,endY=0)},!1)},visibilityListen:function(){var e,o,i;"undefined"!=typeof g.hidden?(e="hidden",i="visibilitychange",o="visibilityState"):"undefined"!=typeof t.mozHidden?(e="mozHidden",i="mozvisibilitychange",o="mozVisibilityState"):"undefined"!=typeof g.msHidden?(e="msHidden",i="msvisibilitychange",o="msVisibilityState"):"undefined"!=typeof g.webkitHidden&&(e="webkitHidden",i="webkitvisibilitychange",o="webkitVisibilityState"),g.addEventListener(i,function(){"visible"!==g[o]?clearInterval(h):g.getElementById("send_log")&&(L=parseInt(9999*Math.random())+parseInt((new Date).getTime()).toString().substr(5,8),b=0,r=0,s=0,l=0,h=setInterval(S.countTime,1e3))},!1)},countTime:function(){S.dataAnalysis("perSec"),l++,300===l&&clearInterval(h)},sendDataLog:function(e){this.getNiceTuiSource()&&this.ajax({url:'//api.nicetui.cn/niceapi/'+"landingpagelog",callback:"callback",data:e,time:3e3,success:function(){},error:function(){}})},sendLog:function(e,t){"test"==v.nicelog&&alert("NiceTui EffectSave Send Success");try{this.getNiceTuiSource()?this.ajax({url:'//api.nicetui.cn/niceapi/'+"saveEffect",callback:"callback",data:e,time:3e3,success:function(e){t&&"function"==typeof t&&t(e)},error:function(e){t&&"function"==typeof t&&t(e)}}):t&&"function"==typeof t&&t()}catch(n){t&&"function"==typeof t&&t()}},sendLandLog:function(e,t){try{this.getNiceTuiSource()?this.ajax({url:'//api.nicetui.cn/niceapi/'+"reach",callback:"callback",data:e,time:3e3,success:function(e){t&&"function"==typeof t&&t(e)},error:function(e){t&&"function"==typeof t&&t(e)}}):t&&"function"==typeof t&&t()}catch(n){t&&"function"==typeof t&&t()}},dataAnalysis:function(e){var a=(this.getUrlParam(),{sessionID:L,action:e,touchNum:b,inputNum:s,moveNum:r});a=this.extendObj(a,v,{type:101}),S.sendDataLog(a)},getparams:function(e){var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t),o=n.exec(location.href);return null===o?"":o[1]}};S=y.extendObj(S,y),S.init();var k={sendLog:function(a,c){var g=S.extendObj(v,c);S.sendLog(g,a)},openURI:function(a){this.sendLog(function(){c.location.href=a})},init:function(a,c){this.sendLog(a,c)},weixin:function(){this.openURI("weixin://")}};c.nicetuiLog=k,c.countLog=k}(window,document);})()